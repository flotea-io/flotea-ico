!function(n){function e(e){for(var t,o,s=e[0],c=e[1],l=e[2],_=0,d=[];_<s.length;_++)o=s[_],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(n[t]=c[t]);for(u&&u(e);d.length;)d.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var n,e=0;e<i.length;e++){for(var r=i[e],t=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(t=!1)}t&&(i.splice(e--,1),n=o(o.s=r[0]))}return n}var t={},a={carriers:0},i=[];function o(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return n[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=n,o.c=t,o.d=function(n,e,r){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},o.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},o.t=function(n,e){if(1&e&&(n=o(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var t in n)o.d(r,t,function(e){return n[e]}.bind(null,t));return r},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="/static/js/";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;i.push(["./src/carriers.ts","vendors_applicants_carriers_icoBuy_icoVoting_main_voting","vendors_applicants_carriers_icoBuy_icoVoting_voting","applicants_carriers_icoBuy_icoVoting_voting"]),r()}({"./src/carriers.ts":
/*!*************************!*\
  !*** ./src/carriers.ts ***!
  \*************************/
/*! no exports provided */function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm.js");\n/* harmony import */ var _components_blockchain__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/blockchain */ "./src/components/blockchain.ts");\n\n\nvar firstLoadCount = 3;\nvar sharedData = {\n    carriers: [],\n    loading: false,\n    carriersCount: 0,\n};\nvar Carriers = /** @class */ (function () {\n    function Carriers() {\n        var _this = this;\n        this.blockchain = new _components_blockchain__WEBPACK_IMPORTED_MODULE_1__["default"](true);\n        this.blockchain.loadContract("Carriers", function (contract) {\n            contract.events.allEvents({}, function (error, event) {\n                if (typeof event.returnValues != "undefined")\n                    _this.resolveEvent(event);\n            });\n            _this.loadCarriersCount();\n        });\n        this.initVue();\n        $(\'[data-toggle="tooltip"]\').tooltip();\n    }\n    Carriers.prototype.initVue = function () {\n        var _this = this;\n        this.vue = new vue__WEBPACK_IMPORTED_MODULE_0__["default"]({\n            el: "#carriers",\n            template: "#carriers-template",\n            delimiters: [\'${\', \'}\'],\n            data: sharedData,\n            methods: {\n                avatarChars: function (name) {\n                    return name[0] + name[name.length - 1];\n                },\n                loadNext: function () {\n                    _this.loadCarriers(sharedData.carriersCount - sharedData.carriers.length - 1, firstLoadCount, false);\n                }\n            }\n        });\n    };\n    Carriers.prototype.resolveEvent = function (e) {\n        console.log(e);\n        var index;\n        switch (e.event) {\n            case "FinishVotingCarrier":\n                index = this.getIndexById(e.returnValues.proposalIndex);\n                if (index != -1) {\n                    //\tsharedData.carriers[index].result = e.returnValues.result? 1 : 0;\n                }\n                break;\n        }\n    };\n    Carriers.prototype.getIndexById = function (id) {\n        return sharedData.carriers.findIndex(function (el) { return el.index === id; });\n    };\n    Carriers.prototype.loadCarriersCount = function () {\n        var _this = this;\n        this.blockchain.callContract("Carriers", "carrierLength", function (response) {\n            sharedData.carriersCount = response;\n            if (response == 0)\n                sharedData.loading = false;\n            _this.loadCarriers(response - 1, firstLoadCount, false);\n        }, 0);\n    };\n    Carriers.prototype.loadCarriers = function (index, max, toUp) {\n        var _this = this;\n        if (index < 0 || max <= 0) {\n            sharedData.loading = false;\n            return;\n        }\n        sharedData.loading = true;\n        this.blockchain.callContract("Carriers", "carriers", function (response) {\n            var data = {\n                companyWallet: response.companyWallet,\n                name: _this.blockchain.fromHex(response.company),\n                web: _this.blockchain.fromHex(response.web),\n                index: index,\n                enabled: response.enabled\n            };\n            if (toUp)\n                sharedData.carriers.unshift(data);\n            else\n                sharedData.carriers.push(data);\n            _this.loadCarriers(index - 1, max - 1, false);\n        }, null, index);\n    };\n    return Carriers;\n}());\n$(document).ready(function () {\n    new Carriers();\n});\n\n\n//# sourceURL=webpack:///./src/carriers.ts?')}});